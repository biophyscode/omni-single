collections:
  all: 
    - v005
    - v007
    - v008
    - sv003
    - sv004
    - sv005
    - sv006
  big: 
    - v007
    - v005
    - v008
  small:
    - sv003
    - sv004
    - sv005
    - sv006
  one: 
    - v008

slices:
  # BIG SIMULATIONS
  v005:
    groups:
      all: all
      proteins: +selectors/protein_selection
    slices:
      current_v0: {'pbc':'mol','groups':['all','proteins'],'start':50000,'end':850000,'skip':500}
      current: +common_slices/v1
  v007:
    groups:
      all: all
      proteins: +selectors/protein_selection
    slices:
      current_v0: {'pbc':'mol','groups':['all','proteins'],'start':240000,'end':590000,'skip':500}
      current: +common_slices/v1
  v008:
    groups:
      all: all
      proteins: +selectors/protein_selection
    slices:
      current_v0: {'pbc':'mol','groups':['all','proteins'],'start':50000,'end':550000,'skip':500}
      current: +common_slices/v1
  # SMALL SIMULATIONS
  sv003:
    groups:
      all: all
      proteins: +selectors/protein_selection
    slices:
      current: {'pbc':'mol','groups':['all','proteins'],'start':000000,'end':400000,'skip':2000}
  sv004:
    groups:
      all: all
      proteins: +selectors/protein_selection
    slices:
      current: {'pbc':'mol','groups':['all','proteins'],'start':000000,'end':490000,'skip':2000}
  sv005:
    groups:
      all: all
      proteins: +selectors/protein_selection
    slices:
      current: {'pbc':'mol','groups':['all','proteins'],'start':000000,'end':430000,'skip':2000}
  sv006:
    groups:
      all: all
      proteins: +selectors/protein_selection
    slices:
      current: {'pbc':'mol','groups':['all','proteins'],'start':000000,'end':490000,'skip':2000}

variables:
  force_field: martini
  selectors:
    protein_selection: (name BB or name SC1 or name SC2 or name SC3 or name SC4 or name SC5)
    protein_backbone: name BB
    resnames_lipid: ['DOPC','DOPS','POP2','POPC']
    resnames_PIP2: ['POP2','PIP2']
  common_slices:
    v1: {'pbc':'mol','groups':['all','proteins'],'start':200000,'end':700000,'skip':1000}
  lipid_names:
    POP2: "$\\mathrm{{PIP}_{2}}$"

meta:
  short_namer: "lambda sn,spot: sn"
  v005:
    label: IRSp53 (upside-down)
  v007:
    label: endophilin
  v008:
    label: IRSp53
  extrana: >
    Note that simulations "simulation-v004-IRSp53-PIP2-bilayer-large" and "simulation-v006-endophilin-A1-PIP2-bilayer-large" have a minimal amount of water in them, and as a result, a few lipids broke the boundary. This is corrected by the "nojumps" flag.
  sv003:
    label: "IRSp53 (PC,PS)"
  sv004:
    label: "IRSp53"
  sv005:
    label: "endophilin (PC,PS)"
  sv006:
    label: "endophilin"

calculations:
  protein_abstractor:
    uptype: simulation
    slice_name: current
    group: proteins
    collections: all
  lipid_abstractor:
    uptype: simulation
    slice_name: current
    group: all
    collections: all
    specs:
      selector:
        loop:
          lipid_com:
            resnames: +selectors/resnames_lipid
            type: com
      separator: 
        lipid_tip: "name PO4"
        monolayer_cutoff: 1.4
        topologize_tolerance: 0.10
      nojumps: "z"
  undulations:
    uptype: post
    group: all
    slice_name: current
    collections: all
    specs:
      grid_spacing: 1.0
      upstream: lipid_abstractor
  lipid_mesh:
    uptype: post
    slice_name: current
    collections:
     - small
    specs:
      upstream:
        lipid_abstractor:
          selector: lipid_com
  contacts:
    group: all
    uptype: simulation
    slice_name: current
    collections: big
    specs:
      subject: protein
      object: lipid
      cutoff:
        loop: [5.0,10.0,20.0]

off calculations:
  curvature_coupling:
    uptype: post
    slice_name: current_protein
    collections: all
    specs: 
      upstream: undulations
  diffusion_proteins:
    uptype: post
    group: all
    slice_name: current_protein
    collections: all
    specs:
      upstream: protein_abstractor

plots:
  undulations:
    calculation: undulations
    slices: current
    collections: all
  undulations_videos:
    calculation: undulations
    collections: small
  lipid_areas:
    calculation: lipid_mesh
    slices: current
    collections: small
  curvature_coupling:
    calculation: 
      - undulations
      - protein_abstractor
    collections: big
  contacts:
    calculation:
      contacts:
        cutoff: 5.0
    settings: 
      show_residue_names: False
