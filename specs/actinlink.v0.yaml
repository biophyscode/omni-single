
variables:
  art_director: art_ptdins.py
  composition_names:
    symmetric: symmetric
    asymmetric: asymmetric
    position: asymmetric
    charge: symmetric
  selectors:
    ions: (name NA or name CL or name MG or name Cal or name K)
    cations: (name NA or name MG or name Cal or name K)
    resnames_lipid: ['POPC','DOPC','DOPS','DOPE','PI2P','P35P','PIPU','PIPP','SAPI']
    resnames_lipid_chol: ['POPC','DOPC','DOPS','DOPE','CHL1','PI2P','P35P','PIPU','PIPP','SAPI']
    resnames_lipid_chol_ions: ['POPC','DOPC','DOPS','DOPE','CHL1','PI2P','P35P','PIPU','PIPP','SAPI','Na','Cl','MG','Cal','K']
    resnames_PIP2: ['PI2P','P35P','PIPU','PIPP','SAPI']
    resnames_protein: ["GLH", "ILE", "ALAD", "GLUH", "GLN", "HISH", "ASN1", "HYP", "GLY", "HIP", "ARGN", "MSE", "CYS1", "GLU", "CYS2", "CYS", "HISE", "ASP", "SER", "HSD", "HSE", "PRO", "CYX", "ASPH", "ORN", "HSP", "HID", "HIE", "LYN", "DAB", "ASN", "CYM", "HISD", "VAL", "THR", "HISB", "HIS", "HIS1", "HIS2", "TRP", "HISA", "ACE", "ASH", "CYSH", "PGLU", "LYS", "PHE", "ALA", "QLN", "MET", "LYSH", "NME", "LEU", "ARG", "TYR"]
  slices:
    steady: {'pbc':'mol','groups':['all'],'start':50000,'end':100000,'skip':100}
    current: {'pbc':'mol','groups':['all'],'start':20000,'end':100000,'skip':100}
    current_ions: {'pbc':'mol','groups':['ions'],'start':20000,'end':100000,'skip':1}
  names:
    proper_residue_names_long:
      CHL1: Cholesterol
      DOPC: DOPC
      DOPS: DOPS
      DOPE: DOPE
      POPC: POPC
      PI2P: "PtdIns(4,5)P$_2$"
      P35P: "PtdIns(3,5)P$_2$"
      PIPP: "PtdIns(4,5)P$_2^{-3}$"
      PIPU: "PtdIns(4,5)P$_2^{-5}$"

collections:
  all:
    - nwaspbilayer3
    - mdia2bilayer_nochl2
  model_compare:
    - mdia2robetta3
    - mdia2robetta4
    - mdia2hm1
  model_comparemdia2:
    - mdia2robetta3
    - mdia2robetta4
    - mdia2hm1
  model_comparenwasp:
    - nwasphm1
    - nwasprobetta4
  model_comparenwaspbilayer:
    - nwasppeptide2
    - nwaspbilayernochl
    - nwaspbilayer3
    - nwasppeptideb
  model_comparegelbilayer:
    - gelbilayer
  model_comparenwaspbilayer3:
    - nwaspbilayer3
  model_comparenwaspbilayernochl:
    - nwaspbilayernochl
  model_comparegelhelix:
    - gelhelix
  model_comparenwaspbilayermut:
    - nwaspbilayermut1
    - nwaspbilayermut1redo
    - nwaspbilayermut2redo
    - nwaspbilayermut2
    - nwaspbilayermut3
    - nwasppeptideb
    - nwasppeptide2
  model_comparenwasppeptide:
    - nwasppeptide2
    - nwasppeptideb
    - nwasppepbilayer2pip
  nwasppepbilayer2pip:
    - nwasppepbilayer2pip
  nwaspbilayermut3:
    - nwaspbilayermut3
  nwasppeptide2:
    - nwasppeptide2
  nwasppeptideb:
    - nwasppeptideb
  cursor:
    - mdia2bilayer_nochl2
    - mdia2bilayerphys
    - gelbilayerphys
    - gelbilayer_nochl
  one:
    - mdia2bilayer_nochl2

meta:
  #! note that this short_namer must be compatible with the spots prefixer!
  short_namer: "lambda sn,spot : 'v'+re.findall('(.+)',sn)[0]"
  mdia2robetta3:
    name:               "mdia2robetta3"
  mdia2robetta4:
    name:               "mdia2robetta4"
  mdia2hm1:
    name:               "mdia2hm1"
  nwasphm1:
    name:               "nwasphm1"
  nwasprobetta4:
    name:               "nwasprobetta4"
  gelbilayer:
    name:               "gelbilayer"
  nwaspbilayernochl:
    name:               "nwaspbilayernochl"
  gelhelix:
    name:               "gelhelix"
  nwaspbilayermut1:
    name:               "nwaspbilayermut1"
  nwaspbilayermut2:
    name:               "nwaspbilayermut2"
  nwaspbilayermut3:
    name:               "nwaspbilayermut3"
  nwasppeptide2:
    name:               "nwasppeptide2"
  nwasppeptideb:
    name:               "nwasppeptideb"
  nwaspbilayermut1redo:
    name:               "nwaspbilayermut1redo"
  nwaspbilayermut2redo:
    name:               "nwaspbilayermut2redo"
  nwasppepbilayer2pip:
    name:               "nwasppepbilayer2pip"
  nwaspbilayer3:
    name:               "nwaspbilayer3"
    ptdins_resname:     "PI2P"
    ptdins_label:       "$\\mathrm{{PI(4,5)P}_{2}}$"
    ion_label:          "$\\mathrm{{Na}^{+}}$"
    composition_name:    physiological
  mdia2bilayer_nochl2:
    name:               "mdia2bilayer nochl"
    ptdins_resname:     "PI2P"
    ptdins_label:       "$\\mathrm{{PI(4,5)P}_{2}}$"
    ion_label:          "$\\mathrm{{Na}^{+}}$"
    composition_name:    physiological
    protein_itp:         s02-adhere/protein.itp
    cations:            ['NA']
    cation:              NA
  gelbilayer_nochl:
    name:               "gelbilayer_nochl"
    ptdins_resname:     "PI2P"
    ptdins_label:       "$\\mathrm{{PI(4,5)P}_{2}}$"
    ion_label:          "$\\mathrm{{Na}^{+}}$"
    composition_name:    physiological
    protein_itp:         s02-adhere/protein.itp
    cations:            ['NA']
    cation:              NA
  gelbilayerphys:
    name:               "gelbilayerphys"
    ptdins_resname:     "PI2P"
    ptdins_label:       "$\\mathrm{{PI(4,5)P}_{2}}$"
    ion_label:          "$\\mathrm{{Na}^{+}}$"
    composition_name:    physiological
    protein_itp:         s02-adhere/protein.itp
    cations:            ['NA']
    cation:              NA
  mdia2bilayerphys:
    name:               "mdia2bilayerphys"
    ptdins_resname:     "PI2P"
    ptdins_label:       "$\\mathrm{{PI(4,5)P}_{2}}$"
    ion_label:          "$\\mathrm{{Na}^{+}}$"
    composition_name:    physiological
    protein_itp:         s02-adhere/protein.itp
    cations:            ['NA']
    cation:              NA

off slices:
  mdia2robetta4:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':58000,'skip':100}
  mdia2robetta3:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':58000,'skip':100}
  mdia2hm1:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':58000,'skip':100}
  nwasprobetta4:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':30000,'skip':100}
  nwasphm1:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':60000,'skip':100}
  gelbilayer:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':100000,'skip':500}
  nwaspbilayer3:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':120000,'skip':500}
  nwaspbilayernochl:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':80000,'skip':500}
  gelhelix:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':100000,'skip':500}
  nwaspbilayermut2:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':35000,'skip':500}
  nwaspbilayermut3:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':28000,'skip':500}
  nwaspbilayermut1:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':47000,'skip':500}
  nwasppeptide2:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':69000,'skip':500}
  nwasppeptideb:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':68000,'skip':500}
  nwasppepbilayer2pip:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':14000,'skip':500}
  nwaspbilayermut1redo:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':43000,'skip':500}
  nwaspbilayermut2redo:
    groups: 
      all: all
      protein: protein
    slices:
      compare_v1: {'pbc':'mol','groups':['all','protein'],'start':0,'end':10000,'skip':500}

off calculations:
  protein_rmsd:
    uptype: simulation
    slice_name: compare_v1
    group: protein
    collections:
      - model_comparenwasp
      - model_comparemdia2
      - model_comparegelbilayer
      - model_comparenwaspbilayer3
      - model_comparenwaspbilayernochl
      - model_comparegelhelix
      - model_comparenwaspbilayermut
      - model_comparenwasppeptide
      - model_comparenwaspbilayer
      - model_comparegelhelix
      - nwasppepbilayer2pip
  nearby_pip2:
    uptype: simulation
    slice_name: compare_v1
    group: all
    collections:
      - model_comparenwaspbilayernochl
      - model_comparenwaspbilayer3
      - model_comparenwaspbilayermut
      - model_comparenwasppeptide
      - model_comparenwaspbilayer
      - model_comparegelhelix
      - nwasppepbilayer2pip
    specs:
      gaps: [2.2,4.6,10.0,20.0]

slices:
  nwaspbilayer3:
    groups: 
      all: all
      protein: protein
    slices:
      current_v1: {'pbc':'mol','groups':['all','protein'],'start':10000,'end':20000,'skip':100}
      #current: {'pbc':'mol','groups':['all','protein'],'start':0,'end':120000,'skip':100}
  mdia2bilayer_nochl2:
    groups: 
      all: all
      protein: protein
    slices:
      current_v1: {'pbc':'mol','groups':['all','protein'],'start':500,'end':6500,'skip':100}
      current: {'pbc':'mol','groups':['all','protein'],'start':0,'end':30000,'skip':100}
  mdia2bilayerphys:
    groups: 
      all: all
      protein: protein
    slices:
      current: {'pbc':'mol','groups':['all','protein'],'start':0,'end':120000,'skip':100}
  gelbilayerphys:
    groups: 
      all: all
      protein: protein
    slices:
      current: {'pbc':'mol','groups':['all','protein'],'start':0,'end':50000,'skip':100}
  gelbilayer_nochl:
    groups: 
      all: all
      protein: protein
    slices:
      current: {'pbc':'mol','groups':['all','protein'],'start':0,'end':20000,'skip':100}

calculations:
  lipid_abstractor:
    uptype: simulation
    slice_name: current
    group: all
    collections: cursor
    specs:
      separator: 
        lipid_tip: "name P"
        monolayer_cutoff: 1.4
      selector:
        loop:
          lipid_com:
            monolayer_cutoff: 1.85
            resnames: +selectors/resnames_lipid
            type: com
          lipid_chol_com:
            monolayer_cutoff: 1.4
            resnames: +selectors/resnames_lipid_chol
            type: com
  protein_abstractor:
    uptype: simulation
    slice_name: current
    group: all
    collections: cursor
  head_angle:
    uptype: simulation
    slice_name: current
    group: all
    collections: cursor
    specs:
      upstream: 
        lipid_abstractor:
          selector: lipid_com
  protein_rmsd:
    uptype: simulation
    slice_name: current
    group: protein
    collections: cursor
  hydrogen_bonding:
    group: all
    uptype: simulation
    slice_name: current
    collections: cursor
    specs:
      angle_cutoff: 160.0
      distance_cutoff: 3.4
      protein: true
  salt_bridges:
    group: all
    uptype: simulation
    slice_name: current
    collections: cursor
    specs:
      distance_cutoff: 
        loop: [2.2,3.4,4.6]

plots:
  lipid_abstractor:
    calculation: 
      lipid_abstractor:
        selector:
          monolayer_cutoff: 1.85
          resnames: +selectors/resnames_lipid
          type: com
    slices: current
    collections: all
  protein_rmsd:
    calculation: protein_rmsd
    slices: current
    collections: all
  nearby_pip2:
    calculation: nearby_pip2
    slices: compare_v1
    collections:
      - model_comparegelbilayer
      - model_comparenwaspbilayer3
      - model_comparenwaspbilayernochl
      - model_comparenwaspbilayermut
      - model_comparenwasppeptide
      - model_comparenwaspbilayer
      - model_comparegelhelix
      - nwasppepbilayer2pip
  # no plot but hydrogen_bonding uses these data via plotload to plot everything
  salt_bridges:
    collections: cursor
    calculation: 
      salt_bridges:
        # RYAN DO NOT USE SPECS HERE THIS IS VERY COUNTERINTUITIVE
        distance_cutoff: 2.2
